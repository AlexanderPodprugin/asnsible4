# asnsible4

Решение задачи
---
    Проверяем Vagrantfile и исправляем данные, которые нам необходимы
    Запускаем Vagrantfile. После его завершения запускаем consul.play.

#Start Vagrantfile
`vagrant up`

#Start consul.play
`ansible-playbook consul.play`

    Открываем и редактируем hosts(inventory)-чтобы ansible мог управлять нашими хостами.
    Открываем и редактириуем ansible.cfg-чтобы указать наш inventory файл со всеми нужными нам параметрами.
    Создаем папку(roles) где будут хранится все playbooks и конифуграции для наших clients.
        Папка с конфигурацей backend-server: server
            Создаем папку handlers, а в ней playbook, на который мы будем иногда обращаться - чтобы перезагрузить pgl
            Создаем папку tasks, а в ней playbook, который будет стянет и скачает все необходимые пакеты: vip-manager, patroni. Указываем путь куда установить конфигурацию для pgl и vip-manager и запускаем все необходимое.
            Создадим папку vars, где будут хранится все переменные которые испольюзуются во многих файлах и могут изменится при необходимости. Тем самым мы автоматизируем весь процесс. В нашем случае у нас будут переменные: порты для прослушивания и для подключения pgl.
    Запускаем sirius.yml, в котором прописано к каким hosts принадлежат папки

`ansible-playbook sirius.yml`


Если у тебя все работает, можешь поехать в Абхазию, чтобы покушать хачапур и мамалыгу)
